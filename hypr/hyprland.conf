# #######################################################################################
# Hyprland Configuration
# #######################################################################################
# This config uses HJKL for directional controls instead of arrow keys.
# Sections have been logically grouped for readability.
# Original Source: Autogenerated + User Modifications
# #######################################################################################


# =======================================================================================
# ENVIRONMENT & SOURCES
# =======================================================================================

# Source external configuration files (e.g., for colors)
source = ~/.config/hypr/mocha.conf # Catppuccin Mocha theme colors

# Environment Variables
env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24


# =======================================================================================
# STARTUP PROGRAMS (exec-once)
# =======================================================================================
# Programs to launch on Hyprland startup

exec-once = waybar # Status bar
exec-once = hyprpaper # Wallpaper daemon
exec-once = hypridle # Idle management daemon
exec-once = swaync # Notification daemon
# exec-once = nm-applet # Network manager applet (uncomment if needed)
exec-once = systemctl --user start hyprpolkitagent # Polkit agent for authentication
exec-once = zen-browser # A browser, seems specific? Ensure it's what you want.
exec-once = hyprctl setcursor catppuccin-mocha-dark-cursors 36 # Set cursor theme and size

# Example: Launch your preferred terminal on startup
# exec-once = alacritty


# =======================================================================================
# MONITOR CONFIGURATION
# =======================================================================================
# See https://wiki.hyprland.org/Configuring/Monitors/

monitor=,preferred,auto,auto


# =======================================================================================
# INPUT DEVICES & SETTINGS
# =======================================================================================
# See https://wiki.hyprland.org/Configuring/Variables/#input

input {
    kb_layout = us
    kb_variant =
    kb_model =
    kb_options =
    kb_rules =

    follow_mouse = 1 # Focus follows mouse pointer

    sensitivity = 0 # -1.0 to 1.0, 0 means no modification

    touchpad {
        natural_scroll = false
    }
}

# Per-device input config example (adjust sensitivity for a specific mouse)
# See https://wiki.hyprland.org/Configuring/Keywords/#per-device-input-configs
device {
    name = epic-mouse-v1
    sensitivity = -0.5
}

# Gestures (configure if needed)
# See https://wiki.hyprland.org/Configuring/Variables/#gestures
gestures {
    workspace_swipe = false
}


# =======================================================================================
# GENERAL APPEARANCE & BEHAVIOR
# =======================================================================================
# See https://wiki.hyprland.org/Configuring/Variables/#general

general {
    gaps_in = 5             # Gaps between windows
    gaps_out = 10            # Gaps between windows and monitor edges

    border_size = 2         # Window border thickness

    # Border colors (using colors sourced from mocha.conf potentially)
    # Example: col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg
    # Example: col.inactive_border = rgba(595959aa)
    # Using Catppuccin Mocha variables (ensure they are defined in mocha.conf)
    col.active_border = rgba($mauveAlpha) rgba($blueAlpha) 45deg
    col.inactive_border = rgba($surface0Alpha)

    resize_on_border = false # Disable border resizing zone
    allow_tearing = false   # See wiki before enabling: https://wiki.hyprland.org/Configuring/Tearing/
}


# =======================================================================================
# DECORATION (Rounding, Shadows, Blur, Opacity)
# =======================================================================================
# See https://wiki.hyprland.org/Configuring/Variables/#decoration

decoration {
    rounding = 10           # Corner rounding radius

    # Window opacity
    active_opacity = 1.0
    inactive_opacity = 1.0  # Set lower for transparency on unfocused windows if desired

    # Drop shadows
    drop_shadow = true
    shadow_range = 4
    shadow_render_power = 3
    col.shadow = rgba(1a1a1aee) # Shadow color

    # Background blur
    blur {
        enabled = true
        size = 3            # Blur intensity
        passes = 1          # Render passes
        vibrancy = 0.1696
    }
}


# =======================================================================================
# ANIMATIONS
# =======================================================================================
# See https://wiki.hyprland.org/Configuring/Variables/#animations

animations {
    enabled = true

    # Define bezier curve
    bezier = myBezier, 0.05, 0.9, 0.1, 1.05

    # Assign animations (see wiki for options: https://wiki.hyprland.org/Configuring/Animations/)
    animation = windows, 1, 7, myBezier
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = borderangle, 1, 8, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}


# =======================================================================================
# LAYOUT CONFIGURATION
# =======================================================================================

# Default Layout Engine
# See https://wiki.hyprland.org/Configuring/Variables/#general
general {
    # ... other general settings from above are inherited
    layout = dwindle # Use dwindle layout
}

# Dwindle Layout Settings
# See https://wiki.hyprland.org/Configuring/Dwindle-Layout/
dwindle {
    pseudotile = true       # Enable pseudotiling mode (master-stack like)
    preserve_split = true   # Maintain split direction on focus change
    # Toggle pseudotile with $mainMod + P (see keybindings)
}

# Master Layout Settings (relevant if using master layout)
# See https://wiki.hyprland.org/Configuring/Master-Layout/
master {
    new_status = master     # Default placement for new windows
}


# =======================================================================================
# MISCELLANEOUS SETTINGS
# =======================================================================================
# See https://wiki.hyprland.org/Configuring/Variables/#misc

misc {
    force_default_wallpaper = -1 # -1 to allow hyprpaper, 0/1 to force internal
    disable_hyprland_logo = false # Set true to hide the default logo/wallpaper
}


# =======================================================================================
# WINDOW RULES
# =======================================================================================
# See https://wiki.hyprland.org/Configuring/Window-Rules/

# Example Rules (uncomment or modify as needed):
# windowrule = float, ^(pavucontrol)$
# windowrule = float, title:^(Picture-in-Picture)$
# windowrule = size 800 600, ^(Thunar)$
# windowrulev2 = float,class:^(kitty)$,title:^(kitty)$ # Example v2 rule

# Suppress maximize event for all windows (useful for tiling)
windowrulev2 = suppressevent maximize, class:.*


# =======================================================================================
# WORKSPACE RULES
# =======================================================================================
# See https://wiki.hyprland.org/Configuring/Workspace-Rules/

# Example: Assign apps to specific workspaces
# workspace = 1, monitor:DP-1, default:true
# workspace = 2, monitor:HDMI-A-1
# windowrulev2 = workspace 5, class:^(firefox)$

# =======================================================================================
# KEYBINDINGS
# =======================================================================================
# See https://wiki.hyprland.org/Configuring/Binds/
# Directional controls use Arrow Keys.

# Define Main Modifier Key
$mainMod = ALT # Use Alt key as the primary modifier

# Define Programs
$terminal = alacritty
$fileManager = thunar
$menu = rofi -show drun # Application launcher

# --- Application Launchers ---
bind = $mainMod, Q, exec, $terminal      # Launch terminal
bind = $mainMod, E, exec, $fileManager   # Launch file manager
bind = $mainMod, R, exec, $menu          # Launch application menu (rofi)

# --- Window Management ---
bind = $mainMod, C, killactive,              # Close active window
bind = $mainMod, V, togglefloating,         # Toggle floating mode for active window
bind = $mainMod, F, fullscreen,             # Toggle fullscreen for active window
bind = $mainMod, P, pseudo,                 # Toggle pseudotile mode (dwindle)
bind = $mainMod, T, togglesplit,            # Toggle split orientation (dwindle) - Using Alt+T
bind = $mainMod, W, togglegroup,            # Toggle window grouping

# Move Focus (Arrow Keys)
bind = $mainMod, left, movefocus, l          # Move focus left
bind = $mainMod, right, movefocus, r         # Move focus right
bind = $mainMod, up, movefocus, u            # Move focus up
bind = $mainMod, down, movefocus, d          # Move focus down

# Resize Active Window (Alt+Ctrl+Arrow Keys)
bind = $mainMod CTRL, left, resizeactive, -20 0  # Shrink width
bind = $mainMod CTRL, right, resizeactive, 20 0  # Grow width
bind = $mainMod CTRL, up, resizeactive, 0 -20    # Shrink height
bind = $mainMod CTRL, down, resizeactive, 0 20  # Grow height

# Swap Active Window (Alt+Shift+Arrow Keys)
bind = $mainMod SHIFT, left, swapwindow, l       # Swap window left
bind = $mainMod SHIFT, right, swapwindow, r      # Swap window right
bind = $mainMod SHIFT, up, swapwindow, u         # Swap window up
bind = $mainMod SHIFT, down, swapwindow, d       # Swap window down

# --- Workspace Management ---
# Switch workspaces
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move active window to a workspace
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Special Workspace (Scratchpad)
bind = $mainMod, S, togglespecialworkspace, magic # Toggle the 'magic' special workspace
bind = $mainMod SHIFT, S, movetoworkspace, special:magic # Move window to 'magic' special workspace

# Scroll through existing workspaces with mouse wheel
bind = $mainMod, mouse_down, workspace, e+1 # Next workspace
bind = $mainMod, mouse_up, workspace, e-1   # Previous workspace

# --- Session & System Control ---
bind = $mainMod, M, exit,                     # Exit Hyprland (logout)
bind = $SUPER_SHIFT, l, exec, hyprlock      # Lock screen (Uses Super + Shift + L) - Note SUPER key use here!

# --- Utility Bindings ---
# Screenshots using hyprshot (Note SUPER key use here!)
bind = SUPER, P, exec, hyprshot -m window   # Screenshot active window (Super+P)
bind = SUPER_SHIFT, P, exec, hyprshot -m region # Screenshot region (Super+Shift+P)
bind = , Print, exec, hyprshot -m window      # Screenshot active window (PrintScreen key)
bind = shift, Print, exec, hyprshot -m region # Screenshot region (Shift+PrintScreen key)

# --- Hardware Keys (Volume, Brightness, Mic) ---
bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = , XF86MonBrightnessUp, exec, brightnessctl s 10%+
bindel = , XF86MonBrightnessDown, exec, brightnessctl s 10%-

# --- Mouse Bindings ---
# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow    # Alt + Left Mouse Drag = Move window
bindm = $mainMod, mouse:273, resizewindow  # Alt + Right Mouse Drag = Resize window

# =======================================================================================
# End of Configuration
# =======================================================================================
